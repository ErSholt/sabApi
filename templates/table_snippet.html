<div class="overflow-x-auto">
    <table class="w-full text-left text-sm">
        <thead>
            <tr class="text-gray-500 border-b border-gray-800 text-[11px] uppercase tracking-wider">
                <th class="px-6 py-4 font-medium">Name</th>
                <th class="px-6 py-4 font-medium text-center">Status</th>
                <th class="px-6 py-4 font-medium text-center">Type</th>
                <th class="px-6 py-4 font-medium w-64">Progress</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-800">
            {% for dl in torbox_downloads %}
            <tr class="hover:bg-white/[0.02] transition">
                <td class="px-6 py-4">
                    <div class="font-medium text-gray-200 truncate max-w-md">{{ dl.name }}</div>
                </td>
                <td class="px-6 py-4 text-center">
                    <span class="badge-completed text-[10px] px-2 py-0.5 rounded-full font-bold uppercase tracking-tighter">
                        {{ dl.state }}
                    </span>
                </td>
                <td class="px-6 py-4 text-center">
                    <span class="badge-usenet text-[10px] px-2 py-0.5 rounded-md font-bold uppercase">Usenet</span>
                </td>
                <td class="px-6 py-4">
                    <div class="flex items-center gap-3">
                        <div class="flex-grow bg-gray-800 rounded-full h-1.5">
                            <div class="progress-blue h-1.5 rounded-full" style="width: {{ dl.progress }}%"></div>
                        </div>
                        <span class="text-[10px] text-gray-500 w-8 font-mono">{{ dl.progress }}%</span>
                    </div>
                </td>
            </tr>
            {% else %}
            <tr><td colspan="4" class="px-6 py-10 text-center text-gray-600 italic">Keine aktiven Downloads gefunden.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="px-6 py-3 bg-black/50 border-t border-gray-800 flex justify-between items-center">
    <div class="text-[10px] text-gray-500 font-medium">Download-Seite {{ page_t }} von {{ total_t_pages }}</div>
    <div class="flex gap-1">
        <button onclick="changePage(1)" title="Erste Seite" class="p-2 card rounded-lg hover:bg-gray-800 {% if page_t <= 1 %}opacity-20 pointer-events-none{% endif %}">
            <svg class="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="3" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path></svg>
        </button>
        <button onclick="changePage({{ page_t - 1 }})" class="p-2 card rounded-lg hover:bg-gray-800 {% if page_t <= 1 %}opacity-20 pointer-events-none{% endif %}">
            <svg class="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="3" d="M15 19l-7-7 7-7"></path></svg>
        </button>
        <button onclick="changePage({{ page_t + 1 }})" class="p-2 card rounded-lg hover:bg-gray-800 {% if page_t >= total_t_pages %}opacity-20 pointer-events-none{% endif %}">
            <svg class="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="3" d="M9 5l7 7-7 7"></path></svg>
        </button>
        <button onclick="changePage({{ total_t_pages }})" title="Letzte Seite" class="p-2 card rounded-lg hover:bg-gray-800 {% if page_t >= total_t_pages %}opacity-20 pointer-events-none{% endif %}">
            <svg class="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="3" d="M13 5l7 7-7 7M5 5l7 7-7 7"></path></svg>
        </button>
    </div>
</div>